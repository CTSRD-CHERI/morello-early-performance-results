<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Specific hardware and software configurations - Early performance results from the prototype Morello microarchitecture</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../cover/index.html">Early performance results from the prototype Morello microarchitecture</a></li><li class="chapter-item expanded "><a href="../introduction/index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../headline-results/index.html"><strong aria-hidden="true">2.</strong> Headline results</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../headline-results/architectural-integration.html"><strong aria-hidden="true">2.1.</strong> Architectural integration</a></li><li class="chapter-item expanded "><a href="../headline-results/software-ecosystem-enablement.html"><strong aria-hidden="true">2.2.</strong> Software ecosystem enablement</a></li><li class="chapter-item expanded "><a href="../headline-results/microarchitectural-objectives.html"><strong aria-hidden="true">2.3.</strong> Microarchitectural objectives</a></li><li class="chapter-item expanded "><a href="../headline-results/dynamic-performance.html"><strong aria-hidden="true">2.4.</strong> Dynamic performance</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../headline-results/essential-overheads.html"><strong aria-hidden="true">2.4.1.</strong> Essential overheads</a></li><li class="chapter-item expanded "><a href="../headline-results/initial-measured-performance.html"><strong aria-hidden="true">2.4.2.</strong> Initial measured performance results</a></li><li class="chapter-item expanded "><a href="../headline-results/next-steps.html"><strong aria-hidden="true">2.4.3.</strong> Next steps</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../performance-methodology/index.html"><strong aria-hidden="true">3.</strong> Performance methodology</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../performance-methodology/baseline-and-comparison-framework.html"><strong aria-hidden="true">3.1.</strong> Baseline and comparison framework</a></li><li class="chapter-item expanded "><a href="../performance-methodology/morello-microarchitectural-limitations.html"><strong aria-hidden="true">3.2.</strong> Morello microarchitectural limitations</a></li><li class="chapter-item expanded "><a href="../performance-methodology/abis-code-generation-and-compilation.html"><strong aria-hidden="true">3.3.</strong> ABIs, code generation, and compilation</a></li></ol></li><li class="chapter-item expanded "><a href="../performance-analysis-spec/index.html"><strong aria-hidden="true">4.</strong> Performance analysis of SPECint 2006</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../performance-analysis-spec/specint-2006-benchmark-suite.html"><strong aria-hidden="true">4.1.</strong> SPECint 2006 benchmark suite</a></li><li class="chapter-item expanded "><a href="../performance-analysis-spec/specific-hardware-and-software.html" class="active"><strong aria-hidden="true">4.2.</strong> Specific hardware and software configurations</a></li><li class="chapter-item expanded "><a href="../performance-analysis-spec/initial-results.html"><strong aria-hidden="true">4.3.</strong> Initial results</a></li></ol></li><li class="chapter-item expanded "><a href="../caveats/index.html"><strong aria-hidden="true">5.</strong> Caveats</a></li><li class="chapter-item expanded "><a href="../future-work/index.html"><strong aria-hidden="true">6.</strong> Future work</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Early performance results from the prototype Morello microarchitecture</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/CTSRD-CHERI/morello-early-performance-results" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#specific-hardware-and-software-configurations" id="specific-hardware-and-software-configurations">Specific hardware and software configurations</a></h1>
<p>The following software and hardware configurations were used in these
benchmarks.
Specific hardware configurations employ a microarchitectural change
eliminating a data-dependent exception issue as noted above.</p>
<h2><a class="header" href="#hybrid-aarch64-baseline-abi" id="hybrid-aarch64-baseline-abi">Hybrid (aarch64) baseline ABI</a></h2>
<p>This configuration is the baseline for overhead calculations where no
microarchitectural changes are used.
It reflects the performance of legacy aarch64 (64-bit) code on Morello without
fixes to the data-dependent exception issue.</p>
<h2><a class="header" href="#purecap-abi-wo-data-dependency-fix" id="purecap-abi-wo-data-dependency-fix">Purecap ABI (w/o data-dependency fix)</a></h2>
<p>This configuration presents worst-case performance for the shipping Morello
design, as it contains no improvements to the microarchitecture relative to
the taped-out implementation, and also no software adaptations for limitations
to the microarchitectural implementation.
In this mode, capabilities are used for all pointers, implied (e.g., program
counter, stack pointer, GOT entries, etc.) and explicit (e.g., language-level
pointers to structures and arrays).
Further, all global accesses are via the GOT, to ensure every global is
accessed through a dedicated capability carrying variable-specific permissions
and bounds.
This configuration is known to trigger the PCC branch-prediction issue during
calls into short functions, function returns, and jump tables — a change
that is now also used in baseline pure-capability code generation.</p>
<h2><a class="header" href="#benchmark-abi-wo-data-dependency-fix" id="benchmark-abi-wo-data-dependency-fix">Benchmark ABI (w/o data-dependency fix)</a></h2>
<p>This configuration is based on the purecap configuration, but with a shift to
the &quot;Benchmark ABI&quot;, which modifies default bounds on code pointers to be
global.
The benchmark ABI shifts code generation to use integer jump instructions,
avoiding triggering of stalls stemming from PCC-relative accesses depending on
new PCC bounds as described in <a href="../performance-methodology/morello-microarchitectural-limitations.html">Morello microarchitectural
limitations</a>.
This workaround should especially recover non-essential overhead associated
with jump tables and calls into short functions.</p>
<h2><a class="header" href="#benchmark-abi-w-data-dependency-fix" id="benchmark-abi-w-data-dependency-fix">Benchmark ABI (w/ data-dependency fix)</a></h2>
<p>This configuration is based on the Benchmark ABI configuration, only run with
a modified microarchitecture that addresses the data-dependent exception issue
described in <a href="../performance-methodology/morello-microarchitectural-limitations.html">Morello microarchitectural
limitations</a>.
The data-dependency fix avoids undesirable (and likely unnecessary in more
recent baseline microarchitectures) stalls on capability stores.</p>
<h2><a class="header" href="#p128-forced-got-w-data-dependency-fix" id="p128-forced-got-w-data-dependency-fix">P128 Forced GOT (w/ data-dependency fix)</a></h2>
<p>This configuration is based on the P128 compilation mode, which widens
language-level pointers to capability width (128 bits) to emulate the
essential overhead of pointer-size growth without exercising capability
portions of the microarchitecture, which are less mature than 64-bit portions.
This compilation mode is known not to experience problems with MADD code
generation, for example.
It also does not encounter problems with PCC branch prediction.
In this mode, all global accesses other than constant pools are via a GOT, and
PC-relative access to globals is not used, forcing indirection that
corresponds to purecap global access.</p>
<p>We treat this configuration as the <strong>upper bound</strong> for estimated performance
overhead of an optimized CHERI implementation against the Morello baseline
(Neoverse N1) microarchitecture with elimination of the data-dependent
exception issue; the microarchitectural change should not, however, affect
this workload.
There are important limitations to the current fidelity of this work.
With respect to the stack, storage for language-level pointers is widened, but
only 64-bit values are loaded and stored.
For implied register saves and restores, storage is not widened.
GOT entries, including those used for the PLT, remain 64 bit.</p>
<h2><a class="header" href="#p128-w-data-dependency-fix" id="p128-w-data-dependency-fix">P128 (w/ data-dependency fix)</a></h2>
<p>This configuration is identical to the P128 Forced-GOT configuration except
that access to globals is sometimes performed via PCC, bypas
ing GOT entries in configurations where aarch64 would offer the same choice
— e.g., when performing read-only accesses to globals within the current
shared object.
If this optimization were used with pure-capability code, it could lead to
inadequate bounds enforcement for read-only global variables whose pointers
are taken, or when the compiler cannot prove that dynamically chosen indices
to global arrays remain in bounds.
We treat this configuration as the <strong>lower bound</strong> for estimated performance
overhead of an optimized CHERI implementation against the Morello baseline
(Neoverse N1) microarchitecture with elimination of the data-dependent
exception issue; as above, the microarchitectural change should not affect
this workload.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../performance-analysis-spec/specint-2006-benchmark-suite.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../performance-analysis-spec/initial-results.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../performance-analysis-spec/specint-2006-benchmark-suite.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../performance-analysis-spec/initial-results.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
